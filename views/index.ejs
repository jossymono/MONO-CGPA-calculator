<!-- views/index.ejs -->
<!DOCTYPE html>
<html>
<head>
  <title>CGPA Calculator</title>
  <link rel="stylesheet" type="text/css" href="/styles.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6916342381851364"
     crossorigin="anonymous"></script>
</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="/">Hello...</a></li>
        <!-- Add more navigation links as needed -->
      </ul>
      <div id="greeting">Good Morning</div>
    </nav>
  </header>

  <div class="container">
    <h1>CGPA Calculator</h1>
    <form action="/calculate" method="POST" id="cgpa-form">
      <div id="courses">
        <div class="course">
          <label for="subject0">Subject:</label>
          <input type="text" name="subjects[0]" required>
          <label for="credit0">Credits:</label>
          <select name="credits[0]" required>
            <option value="0">Select-Credit</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
          <label for="grade0">Grade:</label>
          <select name="grades[0]" required>
            <option value="0">Select-Grade</option>
            <option value="A">A</option>
            <option value="B">B</option>
            <option value="C">C</option>
            <option value="D">D</option>
            <option value="E">E</option>
            <option value="F">F</option>
          </select>
          <button type="button" class="remove-course">Remove</button>
        </div>
      </div>
      <!-- Input for total credits -->
      <label for="totalCredits">Total Credits:</label>
      <input type="text" name="totalCredits" id="totalCredits" required>
      <button type="button" id="add-course">Add Course</button>
      <button type="submit">Calculate CGPA</button>
    </form>
  </div>

  <script>
    let courseCount = 1;

    document.getElementById('add-course').addEventListener('click', () => {
      const coursesDiv = document.getElementById('courses');
      const newCourseDiv = document.createElement('div');
      newCourseDiv.className = 'course';
      newCourseDiv.innerHTML = `
        <label for="subject${courseCount}">Subject:</label>
        <input type="text" name="subjects[${courseCount}]" required>
        <label for="credit${courseCount}">Credits:</label>
        <select name="credits[${courseCount}]" required>
          <option value="0">Select-Credit</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
        </select>
        <label for="grade${courseCount}">Grade:</label>
        <select name="grades[${courseCount}]" required>
          <option value="0">Select-Grade</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
          <option value="D">D</option>
          <option value="E">E</option>
          <option value="F">F</option>
        </select>
        <button type="button" class="remove-course">Remove</button>
      `;
      coursesDiv.appendChild(newCourseDiv);
      courseCount++;

      // Add event listener to the new "Remove" button
      newCourseDiv.querySelector('.remove-course').addEventListener('click', () => {
        coursesDiv.removeChild(newCourseDiv);
      });
    });

    // JavaScript validation for credits and grades
    const cgpaForm = document.getElementById('cgpa-form');
    cgpaForm.addEventListener('submit', (e) => {
      const creditsInputs = document.querySelectorAll('select[name^="credits"]');
      const gradesInputs = document.querySelectorAll('select[name^="grades"]');

      for (let i = 0; i < creditsInputs.length; i++) {
        const creditInput = creditsInputs[i];
        const gradeInput = gradesInputs[i];

        // Validate credits (numeric and greater than zero)
        if (isNaN(creditInput.value) || parseFloat(creditInput.value) <= 0) {
          e.preventDefault();
          alert('Credits must be a positive number.');
          return;
        }

        // Validate grades (only A, B, C, D, E, F)
        const validGrades = ['A', 'B', 'C', 'D', 'E', 'F'];
        if (!validGrades.includes(gradeInput.value.toUpperCase())) {
          e.preventDefault();
          alert('Grades input should be A, B, C, D, E, or F (case-insensitive).');
          return;
        }
      }
    });
  </script>

  <footer>
    &copy; 2023 Eseha Jospeh Ilerioluwa All Rights Reserved.
  </footer>
  <script>
    // JavaScript for changing the greeting based on the user's local time
    const greetingDiv = document.getElementById('greeting');
    const hour = new Date().getHours();
    let greeting = "";

    if (hour >= 5 && hour < 12) {
      greeting = 'Good Morning';
    } else if (hour >= 12 && hour < 18) {
      greeting = 'Good Afternoon';
    } else {
      greeting = 'Good Evening';
    }

    greetingDiv.textContent = greeting;
  </script>
</body>
</html>

